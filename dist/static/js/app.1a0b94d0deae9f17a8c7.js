webpackJsonp([1],{KdoN:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),s=n("mvHQ"),i=n.n(s),r=n("YOBo"),a=n.n(r),l={name:"App",data:function(){return{connectedToDb:!1,loginForm:{visible:!1,username:"default",password:"default",responseText:null},activeUser:null,icons:{user:a.a}}},computed:{formIncomplete:function(){return!this.loginForm.username||!this.loginForm.password}},methods:{doLogin:function(){var e=this;fetch(this.server+"/login",{method:"POST",headers:{"content-type":"application/json"},body:i()({user:this.loginForm.username,password:this.loginForm.password})}).then(function(e){return e.json()}).then(function(t){t.ok?(e.activeUser=t.user,e.loginForm.visible=!1,e.loginForm.username="",e.loginForm.password=""):"AuthenticationFailed"===t.user?e.loginForm.responseText="Invalid username / password":e.loginForm.responseText="Something went wrong."})},addUser:function(){var e=this;fetch(this.server+"/new-user",{method:"POST",headers:{"content-type":"application/json"},body:i()({user:this.loginForm.username,password:this.loginForm.password})}).then(function(e){return e.json()}).then(function(t){console.log(t),t.user?e.loginForm.responseText="User "+t.user+" has been created.":"DuplicateKey"===t.codeName?e.loginForm.responseText="Username already in use.":e.loginForm.responseText="Something went wrong."})}},created:function(){this.doLogin()}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activeUser?n("div",{attrs:{id:"app"}},[n("div",{staticClass:"top-bar"},[n("img",{attrs:{src:"http://via.placeholder.com/250x75",alt:"logo"}}),e._v(" "),n("div",{staticStyle:{display:"flex"}},[n("button",{staticClass:"button",on:{click:function(t){e.loginForm.visible=!e.loginForm.visible}}},[e._v("Login / Register")]),e._v(" "),"default"!==e.activeUser?n("div",{staticClass:"user"},[n("font-awesome-icon",{attrs:{icon:e.icons.user,size:"2x"}}),e._v("\n        "+e._s(e.activeUser)+"\n      ")],1):e._e()])]),e._v(" "),e.loginForm.visible?n("div",{staticClass:"login-menu"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.username,expression:"loginForm.username"}],attrs:{autofocus:"",placeholder:"Username"},domProps:{value:e.loginForm.username},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doLogin(t):null},input:function(t){t.target.composing||e.$set(e.loginForm,"username",t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{placeholder:"Password",type:"password"},domProps:{value:e.loginForm.password},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.doLogin(t):null},input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}}),e._v(" "),e.loginForm.responseText?n("div",{staticStyle:{color:"red"}},[e._v(e._s(e.loginForm.responseText))]):e._e(),e._v(" "),n("button",{staticClass:"button",class:{"disabled-button":e.formIncomplete},attrs:{disabled:e.formIncomplete},on:{click:e.doLogin}},[e._v("Login >")]),e._v(" "),n("button",{staticClass:"button",class:{"disabled-button":e.formIncomplete},attrs:{disabled:e.formIncomplete},on:{click:e.addUser}},[e._v("Register >")])]):e._e(),e._v(" "),n("div",{staticClass:"header",on:{click:function(t){e.$router.push("/prizes")}}},[n("h1",[e._v("Rewards")])]),e._v(" "),n("div",{staticClass:"router-container"},[n("router-view")],1),e._v(" "),n("div",{staticClass:"footer"},[e._v("\n    Terms & Conditions | Privacy Policy\n  ")])]):e._e()},staticRenderFns:[]};var u=n("VU/8")(l,c,!1,function(e){n("Y++M")},null,null).exports,d=n("/ocq"),p={name:"Prizes",data:function(){return{prizeList:null}},created:function(){var e=this;fetch(this.server+"/prize-list").then(function(e){return e.json()}).then(function(t){return e.prizeList=t})}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component"},[n("h2",[e._v("Here is the full list of prizes that you can win.")]),e._v(" "),n("div",{staticClass:"prize-list"},e._l(e.prizeList,function(t){return n("div",{staticClass:"prize"},[n("img",{attrs:{src:t.image_url,alt:t.name}}),e._v(" "),n("div",{staticClass:"prize-info"},[n("div",{staticStyle:{"font-size":"1.5em"}},[e._v("Win a "+e._s(t.name))]),e._v(" "),n("div",[n("router-link",{staticClass:"button",attrs:{to:"/details/"+t._id}},[e._v("Redeem >")])],1)])])}))])},staticRenderFns:[]};var v=n("VU/8")(p,m,!1,function(e){n("nC0M")},"data-v-6d60fa1d",null).exports,f=n("KeE0"),_=n.n(f),h={name:"Modal",data:function(){return{stage:0,responseMsg:null,icons:{close:_.a}}},props:["prize"],methods:{redeemPrize:function(){var e=this;fetch(this.server+"/redeem-prize",{method:"POST",body:i()({prizeId:this.prize._id,quantity:this.prize.quantity}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t.ok?e.stage++:"Unauthorized"===t.codeName?e.responseMsg="You must be logged in to redeem a prize.":e.responeMsg="Something went wrong."})}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-bg"},[0===e.stage?n("div",{staticClass:"modal"},[n("font-awesome-icon",{attrs:{icon:e.icons.close,size:"2x"},on:{click:function(t){e.$emit("close-modal")}}}),e._v(" "),n("h2",[e._v("Are you sure?")]),e._v(" "),n("img",{attrs:{src:e.$props.prize.image_url,alt:e.$props.prize.name}}),e._v(" "),n("p",[e._v("Redeem for "+e._s(e.$props.prize.name)+"?")]),e._v(" "),e.responseMsg?n("div",{staticStyle:{color:"red"}},[e._v(e._s(e.responseMsg))]):e._e(),e._v(" "),n("div",[n("button",{staticClass:"button",on:{click:e.redeemPrize}},[e._v("Yes")]),e._v(" "),n("button",{staticClass:"button cancel-button",on:{click:function(t){e.$emit("close-modal")}}},[e._v("Cancel")])])],1):n("div",{staticClass:"modal"},[n("font-awesome-icon",{attrs:{icon:e.icons.close,size:"2x"},on:{click:function(t){e.$emit("close-modal")}}}),e._v(" "),n("h2",[e._v("Congratulations!")]),e._v(" "),n("p",[e._v("You redeemed "+e._s(e.$props.prize.name))]),e._v(" "),n("router-link",{staticClass:"button",attrs:{to:"/prizes"}},[e._v("More Prizes")])],1)])},staticRenderFns:[]};var z={name:"Details",components:{modal:n("VU/8")(h,g,!1,function(e){n("KdoN")},null,null).exports},data:function(){return{prize:null,modalDisplayed:!1}},created:function(){var e=this,t=encodeURI(this.$route.params.prize);fetch(this.server+"/prize?prizeId="+t).then(function(e){return e.json()}).then(function(t){return e.prize=t[0]})}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.prize?n("div",{staticClass:"component"},[n("div",{staticClass:"grid"},[n("img",{attrs:{src:e.prize.image_url,alt:e.prize.name}}),e._v(" "),n("div",{staticClass:"prize-form"},[n("h2",[e._v(e._s(e.prize.name))]),e._v(" "),n("button",{staticClass:"button",class:{"disabled-button":e.prize.quantity<1},attrs:{disabled:e.prize.quantity<1},on:{click:function(t){e.modalDisplayed=!0}}},[e._v("Redeem >")]),e._v(" "),n("span",[e._v(e._s(e.prize.quantity)+" left in stock")])]),e._v(" "),n("div",{staticClass:"description"},[n("h3",[e._v("Description")]),e._v("\n      "+e._s(e.prize.description)+"\n    ")])]),e._v(" "),e.modalDisplayed?n("modal",{attrs:{prize:e.prize},on:{"close-modal":function(t){e.modalDisplayed=!1}}}):e._e()],1):e._e()},staticRenderFns:[]};var y=n("VU/8")(z,b,!1,function(e){n("bje2")},"data-v-bcde7e7e",null).exports,F={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var w=n("VU/8")({name:"AddUser",data:function(){}},F,!1,function(e){n("fS34")},null,null).exports;o.a.use(d.a);var C=new d.a({routes:[{path:"/prizes",component:v},{path:"/details/:prize",component:y},{path:"/add-user",component:w},{path:"*",redirect:"/prizes"}]}),k=(n("QxPg"),n("U0v6")),x=n.n(k);o.a.component("font-awesome-icon",x.a),o.a.config.productionTip=!1,o.a.mixin({data:function(){return{server:"localhost:8080"===location.host?"http://localhost:3636":""}}}),new o.a({el:"#app",router:C,components:{App:u},template:"<App/>"})},"Y++M":function(e,t){},bje2:function(e,t){},fS34:function(e,t){},nC0M:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1a0b94d0deae9f17a8c7.js.map